# Food_Explorer - API üçΩÔ∏èüçΩÔ∏è

- ***API from complete project of a fictitious restaurant, from creating/visualizing the dishes to choosing the payment method and finalizing purchases. Ordinary users can view and add the desired amount of dishes and finalize the order, being able to follow the status of the order while waiting. Administrators can add, edit or delete a dish whenever they want, uploading the image of the dish and its characteristics, in addition to having control of orders and being able to make changes to the status to keep updating the customer. Both have a favorites list, being able to add or remove a dish from that list at any time.***


- Search filter by dish name and ingredients to facilitate search

- Ingredients connected with dishes for easy view;

- User JWT Token to authentication at login;

- Upload of images dishes;

- List of favorites to users and admin select your favorites dishes;

- users viewed the list of dish orders and their status, which can be updated by the administrator at any time;

## Code Versioning

- **GIT**
- **GITHUB**


## Tech used

****Backend:**** **Nodejs, Express, API RESTfull** - *Knex*, *Database relational*, *Sqlite*, *Routes*, *Cors*, *JWT Token*, *Multer - upload of images*, *Jest*;


# Endpoints

- Users - create(para cadastrar o usu√°rio), Update(para atualizar os dados do usu√°rio), UpdateIsAdmin(para atualizar o status da coluna isAdmin, que define se √© admin ou n√£o. Endpoint atualiza apenas o usu√°rio logado. Para atualizar basta passar um JSON com a coluna "isAdmin": true ou false, de acordo com o desejado);

- Sessions - Create(Faz o login do usu√°rio por meio do email e senha de um usu√°rio existente no banco do dados, pegando os dados do corpo da requisi√ß√£o(com seus dados e com o token de autentica√ß√£o));

- Dishes - Create(cria um novo prato com os dados[name, avatar_dish, description, price, categoria] desejados e os ingredientes), Show(Mostra os dados de um prato espec√≠fico e seus ingredientes com base no ID enviado pelo par√¢metro), Index(Mostra uma lista com todos os pratos cadastrados, seus dados e os ingredientes), Delete(Deleta um prato espec√≠fico com base no ID enviado pelo par√¢metro), Update(Atualiza um prato, pegando somente os campos que est√£o diferentes dos dados antigos e faz essa atualiza√ß√£o por meio do ID enviado pelo par√¢metro);

- Requests - Create(cria um novo pedido, pegando a data atualizada de acordo com o hor√°rio de SP, o user_id para saber quem foi o usu√°rio que criou e seu ID √∫nico), Show(Mostra um √∫nico pedido com seus dados e os dados de todos os itens que pertencem a esse pedido, de acordo com o user_id enviado pelo usu√°rio logado para filtrar apenas os pedidos que pertencem a ele), Index(Mostra todos os pedidos seus dados e os dados dos itens que pertencem a esse pedido, √∫til para o Admin ter o controle dos pedidos), Delete(Deleta um pedido espec√≠fico e todos os itens que pertencem a ele, filtro feito por meio do ID enviado pelo par√¢metro da requisi√ß√£o), Update(Atualiza o estado de um pedido feito, serve para o controle se o pedido j√° foi entregue, est√° sendo preparado ou pendente. Filtro feito por meio do ID do pedido, enviado pelo corpo da requisi√ß√£o);

- ItemsRequests - Create(cria uma lista com todos os itens, quantidade, valor e seus dados e cadastra junto com o pedido por meio da cardinalidade usando o request_id como par√¢metro para especificar a qual pedido os itens pertencem), Update(Atualiza os itens do pedido, podendo mudar sua quantidade, filtro feito por meio do ID do item enviado pelo par√¢metro da requisi√ß√£o). Delete(Remove um item espec√≠fico da lista de itens do pedido, filtro feito por meio do ID do item enviado por meio do par√¢metro da requisi√ß√£o);

- Category - Create(Cria uma nova categoria para conter a lista de pratos que pertencem a essa categoria. √â necess√°rio criar as tabelas: Refei√ß√£o, Bebidas e Sobremesas, nessa ordem para depois cadastrar os pratos em uma dessas categorias e para o bom funcionamento da aplica√ß√£o), Delete(Deleta uma categoria espec√≠fica de acordo com o ID passado por meio do par√¢metro.); Obs: Deletar uma categoria pode acarretar em problemas na aplica√ß√£o;

- Files - Serve para armazenar um arquivo de imagem antes de ser atualizado em um prato, a cria√ß√£o ou atualiza√ß√£o de imagem do prato deve passar por esse arquivo, pois o express est√° usando um m√©todo espec√≠fico para ele, o static();

- Favorites - Create(Adiciona um prato e seus dados a uma lista de favoritos por meio do dish_id ou ID do prato para especificar o prato adicionado), Index(Mostra a lista dos pratos favoritos e seus dados por meio do ID do usu√°rio, para filtrar apenas os favoritos do usu√°rio aut√™nticado/logado), Delete(Remove um prato e seus dados da lista de favoriros, filtrando por meio do ID do prato para remover apenas o prato especificado da lista).


# importante

- Para installar as depend√™ncias do projeto e inicializar seu funcionamento, execute o comando npm i ou yarn i no terminal. √â importante executar esse comando para garantir que todas as depend√™ncias necess√°rias estejam instaladas corretamente.

- Para inicializar as tabelas do banco de dados execute o comando "npm run migrate".

- Para realizar as requisi√ß√µes no insomnia √© necessario usar nos par√¢metros o seguinte endere√ßo, http://localhost:3333/"nome da tabela" podendo ser [users, sessions, dishes, requests, items_requests, category, files, favorites] de acordo com a tabela que ser√° feita a modifica√ß√£o.